type ApiKey {
  key: String!
  name: String!
}

type CreateStoryPayload {
  story: Story!
}

type DeleteStoryPayload {
  deletedStoryId: String
  error: StoryNotFoundError
  success: Boolean!
}

type Library {
  stories(after: String, first: Float): StoryConnection!
}

type Mutation {
  bootstrap(email: String!, name: String!, password: String!): User!
  createApiKey(name: String!): ApiKey!
  createStory(title: String!, url: String!): CreateStoryPayload!
  deleteStory(id: String!): DeleteStoryPayload!
  signIn(email: String!, password: String!): SignInResponse!
  updateStory(id: String!, title: String): UpdateStoryPayload!
}

"""An object with a globally unique ID"""
interface Node {
  id: ID!
}

type PageInfo {
  endCursor: String
  hasNextPage: Boolean!
  hasPreviousPage: Boolean!
  startCursor: String
}

type Query {
  me: User!
  node(id: String!): Node
}

type SignInResponse {
  token: String!
  user: User!
}

type Story implements Node {
  createdAt: String!
  id: ID!
  title: String!
  url: String!
}

type StoryConnection {
  edges: [StoryEdge!]!
  pageInfo: PageInfo!
}

type StoryEdge {
  cursor: String!
  node: Story!
}

type StoryNotFoundError {
  code: String!
  message: String!
  storyId: String!
}

type UpdateStoryPayload {
  error: StoryNotFoundError
  story: Story
}

type User {
  email: String!
  id: String!
  library: Library!
  name: String
}