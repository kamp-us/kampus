# ctx — context management targets
# Generated by: ctx init
# Safe to overwrite: ctx owns this file. Customize your Makefile, not this one.

.PHONY: journal journal-serve

## journal: Export sessions and regenerate journal site
journal:
	@echo "==> Exporting sessions to journal..."
	@ctx recall export --all
	@echo "==> Generating journal site..."
	@ctx journal site --build
	@echo ""
	@echo "Journal site updated!"
	@echo ""
	@echo "Next steps (in Claude Code):"
	@echo "  1. /ctx-journal-normalize  — fix markdown rendering (skips already normalized)"
	@echo "  2. /ctx-journal-enrich     — add metadata per entry (skips if frontmatter exists)"
	@echo ""
	@echo "Then re-run: make journal"

## journal-serve: Serve the journal site locally
journal-serve:
	@ctx journal site --serve
